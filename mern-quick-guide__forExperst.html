<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MERN - quick guide (for experts)</title>
    <link rel="stylesheet" href="./css/main.min.css" />
  </head>
  <body>
    <div class="wrapper">
      <header>
        <div class="container">
          <span><a href="./index.html">Home &#8678;</a></span>

          <a
            class="github-link"
            target="_blank"
            href="https://github.com/torkotiuk/dev"
          >
            <svg width="20" height="20">
              <use href="./assets/images/sprite.svg#icon-github"></use>
            </svg>
          </a>
        </div>
      </header>

      <main class="main">
        <section class="section">
          <div class="container">
            <h1>MERN - quick guide (for experts)</h1>

            <ol>
              <li><b>npm init -y</b></li>
              <li>
                Copy from any repo
                <a
                  target="_blank"
                  href="https://github.com/torkotiuk?tab=repositories"
                  >.prettierrc.json</a
                >
              </li>
              <li>
                Add script --- <b>"start:dev": "nodemon app.js"</b> --- to
                package.json for starting backend
              </li>
              <li>create <b>app.js</b></li>
              <li>
                <div><b>npm i express cors dotenv mongoose</b></div>
                and
                <div><b>npm i nodemon -D</b></div>
              </li>
              <li>
                Add <b>.env</b> file in root of project with necessary
                <ul>
                  <li>PORT=5555</li>
                  <li>
                    DB_HOST=mongodb+srv://admin:PASSWORD@testcluster.8md36bg.mongodb.net/DBNAME?retryWrites=true&w=majority
                    <div>
                      (<a
                        target="_blank"
                        href="./mongoDB_createDB_addConnection.html"
                        >explanation how to take it</a
                      >)
                    </div>
                  </li>
                </ul>
              </li>
              <li>
                Add to <b>app.js</b> simplest express backend server by
                <p
                  class="codepen"
                  data-height="410"
                  data-default-tab="js"
                  data-slug-hash="zYLLygg"
                  data-user="imitator"
                  style="
                    height: 300px;
                    box-sizing: border-box;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border: 2px solid;
                    margin: 1em 0;
                    padding: 1em;
                    font-size: 22px;
                  "
                >
                  <span
                    >See the Pen
                    <a href="https://codepen.io/imitator/pen/zYLLygg">
                      1-simplest Express web-server</a
                    >
                    by Andrii (<a href="https://codepen.io/imitator"
                      >@imitator</a
                    >) on <a href="https://codepen.io">CodePen</a>.</span
                  >
                </p>
                <script
                  async
                  src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                ></script>

                <p style="margin-top: 5px">
                  For checking of the server working type in terminal
                  <b>npm run start:dev</b> and look at this on
                  <a target="_blank" href="http://localhost:5555/"
                    >http://localhost:5555/</a
                  >
                  (or
                  <a target="_blank" href="http://127.0.0.1:5555/"
                    >http://127.0.0.1:5555/</a
                  >
                  )
                </p>
              </li>
              <li>
                Create -- routes -- folder in our proj for separating routes
                from main app.js
                <ul>
                  <li>
                    Create file
                    <span style="color: green"
                      ><b>routes/products.routes.js</b></span
                    >
                    for making routes for products endpoint
                    <p
                      class="codepen"
                      data-height="340"
                      data-default-tab="js"
                      data-slug-hash="eYPBdpX"
                      data-user="imitator"
                      style="
                        height: 300px;
                        box-sizing: border-box;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: 2px solid;
                        margin: 1em 0;
                        padding: 1em;
                      "
                    >
                      <span
                        >See the Pen
                        <a href="https://codepen.io/imitator/pen/eYPBdpX">
                          3-A __ routes/products.routes.js</a
                        >
                        by Andrii (<a href="https://codepen.io/imitator"
                          >@imitator</a
                        >) on <a href="https://codepen.io">CodePen</a>.</span
                      >
                    </p>
                    <script
                      async
                      src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                    ></script>
                  </li>
                  <li>
                    In future we will have more routes (users, customers etc),
                    so we should group them in some kind of
                    <span style="color: green"><b>routes/index.js</b></span>
                    where we reexport products

                    <div class="code">
                      const products = require('./products.routes');
                    </div>
                    <div class="code">module.exports = { products, };</div>
                  </li>
                  <li>
                    Then import routes in
                    <span style="color: green"><b>app.js</b></span>
                    <div class="code">const routes = require('./routes');</div>
                  </li>
                  <li>
                    And use routes in <b style="color: green">app.js</b> by
                    middleware like
                    <div class="code">
                      app.use('/api/v1/products', routes.products);
                    </div>
                  </li>
                  <li>
                    <div>
                      For checking our products responding go to
                      <a
                        target="_blank"
                        href="http://localhost:5555/api/v1/products"
                        >http://localhost:5555/api/v1/products</a
                      >
                    </div>
                  </li>
                </ul>
              </li>
              <li style="margin-top: 10px">
                The next step in making convenient web-server is separating
                controllers from routes folder by creating controllers folder in
                main project folder.
                <ul>
                  <li>
                    Create controllers/products folder,
                    <span style="text-decoration: underline"
                      >so move controller from</span
                    >
                    routes/products.routes.js
                    <ul>
                      <li>
                        <b>controllers/products/getAllProductsCTRL.js</b>
                        <p style="margin: 0">
                          <span style="display: block">
                            <!--  -->
                            <div style="margin-top: 20px"></div>
                            const getAllProductsCTRL = (req, res) => {

                            <div style="margin-left: 20px">
                              <div>res.json([</div>
                              <div style="margin-left: 20px">
                                <div>{</div>
                                <div style="margin-left: 20px">
                                  <div>name: 'IPhone5',</div>
                                  <div>price: 10000,</div>
                                </div>
                                <div>}</div>
                              </div>
                              <div>]);</div>
                            </div>
                            <div>};</div>
                            <!--  -->
                          </span>
                          module.exports = getAllProductsCTRL;
                        </p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Reexport functions from controllers folder by making
                    controllers/products/index.js file
                    <ul>
                      <li>
                        <b>controllers/products/index.js</b>
                        <p>
                          const getAllProductsCTRL =
                          require('./getAllProductsCTRL');
                          <span style="display: block"
                            >module.exports = {getAllProductsCTRL};</span
                          >
                        </p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Import all product controllers from controllers/products
                    folder to controllers/index.js
                    <ul>
                      <li>
                        <b>controllers/index.js</b>
                        <p>
                          const productsControllers = require('./products');
                          <span style="display: block"
                            >module.exports = { productsControllers };</span
                          >
                        </p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Import product controllers from controllers folder & use
                    necessary one
                    <ul>
                      <li>
                        <b>routes/products.routes.js</b>
                        <p style="color: rgb(168, 86, 86)">
                          const express = require('express');
                          <span style="display: block"
                            >const router = express.Router();
                          </span>
                          <span style="display: block"
                            >const { productsControllers: <b>ctrl</b> } =
                            require('../controllers');
                          </span>
                          <span style="display: block"
                            >router.get('/', <b>ctrl</b>.getAllProductsCTRL);
                          </span>
                          module.exports = router;
                        </p>
                        <span
                          >P.S. For checking again refresh or go to
                          <a
                            target="_blank"
                            href="http://localhost:5555/api/v1/products"
                            >http://localhost:5555/api/v1/products</a
                          ></span
                        >
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li style="margin-top: 10px">
                Add mongoDB connection code to app.js
                <p
                  class="codepen"
                  data-height="330"
                  data-default-tab="js"
                  data-slug-hash="mdGjPEg"
                  data-user="imitator"
                  style="
                    height: 300px;
                    box-sizing: border-box;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border: 2px solid;
                    margin: 1em 0;
                    padding: 1em;
                  "
                >
                  <span
                    >See the Pen
                    <a href="https://codepen.io/imitator/pen/mdGjPEg">
                      14 - MongoDB connection</a
                    >
                    by Andrii (<a href="https://codepen.io/imitator"
                      >@imitator</a
                    >) on <a href="https://codepen.io">CodePen</a>.</span
                  >
                </p>
                <script
                  async
                  src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                ></script>
                Or a little bit
                <a
                  target="_blank"
                  href="https://codepen.io/imitator/pen/PoyezPg?editors=0010"
                  >refactored app.js</a
                >
                in this step.
              </li>
              <li style="margin-top: 10px">
                Make the
                <a
                  target="_blank"
                  href="./express-mongoDB-schema._simplest.html"
                  >simplest Schema</a
                >
                in <b>models/schemas/product.schema.js</b> for quick start with
                MongoDb (or go to
                <a href="./express-mongoDB-schema.html">MongoDb Schema</a>
                for making a usual projects one).
              </li>
              <li
                style="
                  background-color: rgb(251, 255, 220);
                  border-radius: 8px;
                  margin-top: 10px;
                  margin-bottom: 10px;
                "
              >
                <b style="background-color: #009d77; color: #fff; padding: 5px"
                  >POST</b
                >
                <ul>
                  <li>
                    Create controllers/products/addProductCTRL.js
                    <p
                      class="codepen"
                      data-height="440"
                      data-default-tab="js"
                      data-slug-hash="NWLVeWe"
                      data-user="imitator"
                      style="
                        height: 300px;
                        box-sizing: border-box;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: 2px solid;
                        margin: 1em 0;
                        padding: 1em;
                      "
                    >
                      <span
                        >See the Pen
                        <a href="https://codepen.io/imitator/pen/NWLVeWe">
                          18 - POST ctrl using for MongoDB</a
                        >
                        by Andrii (<a href="https://codepen.io/imitator"
                          >@imitator</a
                        >) on <a href="https://codepen.io">CodePen</a>.</span
                      >
                    </p>
                    <script
                      async
                      src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                    ></script>
                    (remember about reexports in controllers\products\index.js)
                    <p>
                      Some errors aren't in list of
                      <a
                        target="_blank"
                        href="https://umbraco.com/knowledge-base/http-status-codes/"
                        >http-status-codes</a
                      >, so we try to handle them in catch(error){}, other
                      errors we gather in other place by sending them in
                      <b>next(error)</b>, in app.js(index.js), this will be
                      explaining in next
                      <a target="_blank" href="./express-catchErrors.html"
                        >Catching errors middleware guide</a
                      >
                    </p>
                  </li>
                  <li>
                    Add Catching errors middleware to server.js (or index.js)
                    after all middlewares.
                  </li>

                  <li>
                    Create in routes/products.routes.js the route:
                    <b>router.post('/', ctrl.addProductCTRL);</b>
                  </li>
                  <li>
                    Make some post request (<a
                      target="_blank"
                      href="./postman-request.html"
                      >via POSTMAN f.e.</a
                    >)
                  </li>
                </ul>
              </li>
              <li style="margin-top: 10px">
                The next step of creating a convenient web-server project is
                separating transferring information to mongoDB from controllers
                (means like Model.create(), Model.find()) to separate folder,
                called services in root of a project.
                <ul>
                  <li>
                    <b>Create services/products/addProductSRV.js</b>
                    <p
                      class="codepen"
                      data-height="240"
                      data-default-tab="js"
                      data-slug-hash="poQLJdW"
                      data-user="imitator"
                      style="
                        height: 300px;
                        box-sizing: border-box;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: 2px solid;
                        margin: 1em 0;
                        padding: 1em;
                      "
                    >
                      <span
                        >See the Pen
                        <a href="https://codepen.io/imitator/pen/poQLJdW">
                          60__srv_addItem</a
                        >
                        by Andrii (<a href="https://codepen.io/imitator"
                          >@imitator</a
                        >) on <a href="https://codepen.io">CodePen</a>.</span
                      >
                    </p>
                    <script
                      async
                      src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                    ></script>
                  </li>
                  <li>
                    Reexport functions from services folder by making
                    services/products/index.js file
                    <ul>
                      <li>
                        <b>services/products/index.js</b>
                        <p>
                          const addProductSRV = require('./addProductSRV');
                          <span style="display: block"
                            >module.exports = {addProductSRV};</span
                          >
                        </p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Import all product services from services/products folder to
                    services/index.js
                    <ul>
                      <li>
                        <b>services/index.js</b>
                        <p>
                          const productServices = require('./products');
                          <span style="display: block"
                            >module.exports = { productServices };</span
                          >
                        </p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Refactor <b>controllers/products/addProductCTRL.js</b>
                    <p
                      class="codepen"
                      data-height="300"
                      data-default-tab="js"
                      data-slug-hash="xxQWGzM"
                      data-user="imitator"
                      style="
                        height: 300px;
                        box-sizing: border-box;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: 2px solid;
                        margin: 1em 0;
                        padding: 1em;
                      "
                    >
                      <span
                        >See the Pen
                        <a href="https://codepen.io/imitator/pen/xxQWGzM">
                          61__refactored addProductCTRL due to services</a
                        >
                        by Andrii (<a href="https://codepen.io/imitator"
                          >@imitator</a
                        >) on <a href="https://codepen.io">CodePen</a>.</span
                      >
                    </p>
                    <script
                      async
                      src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                    ></script>
                  </li>
                </ul>
              </li>
              <li style="margin-top: 10px">
                Refactor getAllProductsCTRL.js to the new organize folders
                (means servers)

                <ul>
                  <li>
                    Create <b>servers/products/getAllProductsSRV.js</b>
                    <p
                      class="codepen"
                      data-height="240"
                      data-default-tab="js"
                      data-slug-hash="BaGrNbW"
                      data-user="imitator"
                      style="
                        height: 300px;
                        box-sizing: border-box;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: 2px solid;
                        margin: 1em 0;
                        padding: 1em;
                      "
                    >
                      <span
                        >See the Pen
                        <a href="https://codepen.io/imitator/pen/BaGrNbW">
                          63__getAllProductsSRV</a
                        >
                        by Andrii (<a href="https://codepen.io/imitator"
                          >@imitator</a
                        >) on <a href="https://codepen.io">CodePen</a>.</span
                      >
                    </p>
                    <script
                      async
                      src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                    ></script>
                    p.s. Remember about reexports
                  </li>
                  <li>
                    Refactor <b>getAllProductsCTRL.js</b>
                    <p
                      class="codepen"
                      data-height="400"
                      data-default-tab="js"
                      data-slug-hash="yLQKNGK"
                      data-user="imitator"
                      style="
                        height: 300px;
                        box-sizing: border-box;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        border: 2px solid;
                        margin: 1em 0;
                        padding: 1em;
                      "
                    >
                      <span
                        >See the Pen
                        <a href="https://codepen.io/imitator/pen/yLQKNGK">
                          62__getAllProductsSRV</a
                        >
                        by Andrii (<a href="https://codepen.io/imitator"
                          >@imitator</a
                        >) on <a href="https://codepen.io">CodePen</a>.</span
                      >
                    </p>
                    <script
                      async
                      src="https://cpwebassets.codepen.io/assets/embed/ei.js"
                    ></script>
                  </li>
                </ul>
              </li>
            </ol>
          </div>
        </section>
      </main>

      <footer><div class="container">Footer</div></footer>
    </div>
  </body>
</html>
